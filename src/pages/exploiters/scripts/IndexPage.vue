<template>
  <q-page padding>

    <q-dialog v-model="visible" persistent>
      <q-card class="full-width">
        <q-form @submit="onSubmit" @reset="onReset" class="q-gutter-x-md">
          <q-card-section>
            <div class="text-h6">{{ $t('scripts') }}</div>
          </q-card-section>

          <q-card-section style="max-height: 70vh;" class="scroll">
            <div class="row q-col-gutter-x-md">
              <q-input v-model="form.version" :label="$t('version')" class="col-3" />
              <q-input v-model="form.type" :label="$t('type')" class="col-3" />
            </div>
            <q-input v-model="form.content" :label="$t('content')" type="textarea" autogrow />
          </q-card-section>

          <q-card-actions align="right">
            <q-btn title="cancel" type="reset" unelevated :label="$t('cancel')" v-close-popup />
            <q-btn title="submit" type="submit" flat :label="$t('submit')" color="primary" />
          </q-card-actions>

        </q-form>
      </q-card>
    </q-dialog>
  </q-page>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import type { Script } from 'src/types'


const visible = ref<boolean>(false)

const tableRef = ref()

const initialValues: Script = {
  id: undefined,
  name: '',
  icon: '',
  version: '',
  content: '',
  description: ''
}
const form = ref<Script>({ ...initialValues })

onMounted(() => {
  tableRef.value.requestServerInteraction()
})

function onSubmit() {
  // Close the dialog after submitting
  visible.value = false
}

function onReset() { }
</script>
